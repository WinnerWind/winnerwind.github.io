<!DOCTYPE html> <html lang="en"><head>
<title>Bypassing NAT for self-hosting.</title>
<base href="../..">
<meta name="pathname" content="blogs/tutorials/nat-bypass.html">
<meta name="description" content="So, you have a domain. You have your self hosting box. But alas, you are behind CGNAT. Here's how you can fix it using Cloudflare Tunnel.">
<meta property="og:title" content="Bypassing NAT for self-hosting.">
<meta property="og:description" content="So, you have a domain. You have your self hosting box. But alas, you are behind CGNAT. Here's how you can fix it using Cloudflare Tunnel.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://winnerwind.github.io/blogs/tutorials/nat-bypass.html">
<meta property="og:image" content="undefined">
<meta name="author" content="WinnerWind"><meta property="og:site_name" content="My Site"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><meta charset="UTF-8"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://winnerwind.github.io/site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.jpg"><link rel="preload" href="site-lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/snippets.css"></noscript><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:4px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#layout{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6):has(> :is(.math:not(.math-inline),table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const l=await fetch(e);if(!l.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await l.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let l=document.createRange().createContextualFragment(o),n=Array.from(l.children);for(let e of n)e?.classList?.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e?.classList?.remove("hide")}),10);t.before(l),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(l){let n=o[l],c=l+1;n?(n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(c),l<o.length&&n.addEventListener("load",(()=>e(c)))):l<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager show-inline-title show-ribbon is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="layout"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles"></style><pre class="frontmatter language-yaml" tabindex="0" style="display: none;"><code class="is-loaded language-yaml"><span class="token key atrule">icon</span><span class="token punctuation">:</span> LiGlobe
<span class="token key atrule">description</span><span class="token punctuation">:</span> So<span class="token punctuation">,</span> you have a domain. You have your self hosting box. But alas<span class="token punctuation">,</span> you are behind CGNAT. Here's how you can fix it using Cloudflare Tunnel.
<span class="token key atrule">title</span><span class="token punctuation">:</span> Bypassing NAT for self<span class="token punctuation">-</span>hosting.</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="Bypassing_NAT_for_self-hosting._0"><div id="webpage-icon"><span class="cm-iconize-icon" aria-label="LiGlobe" data-icon="LiGlobe" aria-hidden="true" style="display: inline-flex; transform: translateY(13%);"><svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-globe"><circle cx="12" cy="12" r="10"></circle><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path><path d="M2 12h20"></path></svg></span></div>Bypassing NAT for self-hosting.</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-p"><p dir="auto">This isn't really a tutorial like my other blogs. This is more of like a tutorial mixed with my own personal opinion and experience setting up a web server from my house. </p></div><div class="el-h1"><h1 data-heading="TOC" dir="auto" class="heading" id="TOC_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TOC</h1></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">If you have everything in order but just <em>have the Indian debuff</em> so to speak when it comes to hosting, skip to <a data-href="#5. Bypassing NAT" href="blogs/tutorials/nat-bypass.html#5._Bypassing_NAT_0" class="internal-link" target="_self" rel="noopener nofollow">5. Bypassing NAT</a></li>
<li data-line="1" dir="auto">If you have a working web server, skip to <a data-href="#2. Buying a Domain" href="blogs/tutorials/nat-bypass.html#2._Buying_a_Domain_0" class="internal-link" target="_self" rel="noopener nofollow">2. Buying a Domain</a>.</li>
<li data-line="2" dir="auto">If you have a domain, skip to <a data-href="#3. Cloudflare" href="blogs/tutorials/nat-bypass.html#3._Cloudflare_0" class="internal-link" target="_self" rel="noopener nofollow">3. Cloudflare</a>.</li>
<li data-line="3" dir="auto">If you are starting from scratch, start from <a data-href="#1. Setting up a web server" href="blogs/tutorials/nat-bypass.html#1._Setting_up_a_web_server_0" class="internal-link" target="_self" rel="noopener nofollow">1. Setting up a web server</a>.</li>
</ol></div><div class="el-h1"><h1 data-heading="1. Setting up a web server" dir="auto" class="heading" id="1._Setting_up_a_web_server_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>1. Setting up a web server</h1></div><div class="el-p"><p dir="auto">For this guide, I'll be using Arch Linux for my server. <strong>I do not recommend using Arch Linux</strong><sup data-footnote-id="fnref-1-a13ebaf64ce03ebb" class="footnote-ref" id="fnref-1-a13ebaf64ce03ebb"><a data-footref="1" href="blogs/tutorials/nat-bypass.html#fn-1-a13ebaf64ce03ebb_0" class="footnote-link" target="_self" rel="noopener nofollow">[1]</a></sup>.</p></div><div class="el-h2"><h2 data-heading="1.1. Arranging the hardware." dir="auto" class="heading" id="1.1._Arranging_the_hardware._0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>1.1. Arranging the hardware.</h2></div><div class="el-p"><p dir="auto">You can use pretty much any old laptop you have lying around. Even a tiny device like the Raspberry Pi<sup data-footnote-id="fnref-2-a13ebaf64ce03ebb" class="footnote-ref" id="fnref-2-a13ebaf64ce03ebb"><a data-footref="2" href="blogs/tutorials/nat-bypass.html#fn-2-a13ebaf64ce03ebb_0" class="footnote-link" target="_self" rel="noopener nofollow">[2]</a></sup> is more than enough for a web server. I use a Lenovo ThinkCenter for my server. It's small, cheap, and it gets the job done. </p></div><div class="el-h2"><h2 data-heading="1.2. Arranging the software." dir="auto" class="heading" id="1.2._Arranging_the_software._0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>1.2. Arranging the software.</h2></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="Arch Linux Install" data-href="Arch Linux Install" href="blogs/tutorials/linux/arch-linux-install.html#_0" class="internal-link" target="_self" rel="noopener nofollow">Install Arch Linux</a>. Preferably get <code>linux-lts</code> instead of <code>linux</code> as your kernel. </li>
<li data-line="1" dir="auto">Install whatever services you need. I use <a data-tooltip-position="top" aria-label="https://jellyfin.org" rel="noopener nofollow" class="external-link is-unresolved" href="https://jellyfin.org" target="_self">Jellyfin</a>, <a data-tooltip-position="top" aria-label="https://syncthing.net" rel="noopener nofollow" class="external-link is-unresolved" href="https://syncthing.net" target="_self">Syncthing</a> and <a data-tooltip-position="top" aria-label="https://filebrowser.org" rel="noopener nofollow" class="external-link is-unresolved" href="https://filebrowser.org" target="_self">Filebrowser</a>. </li>
<li data-line="2" dir="auto">Install <code>nginx</code>. </li>
</ol></div><div class="el-h1"><h1 data-heading="2. Buying a Domain" dir="auto" class="heading" id="2._Buying_a_Domain_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2. Buying a Domain</h1></div><div class="el-p"><p dir="auto">Naturally, you need a domain in order to make your web-server publically accessible. You can buy a domain from the registrar of your choice.</p></div><div class="el-p"><p dir="auto">Go to <a rel="noopener nofollow" class="external-link is-unresolved" href="https://tld-list.com" target="_self">https://tld-list.com</a> and search the domain of your choice, and the extension of your choice. Compare the prices according to your needs. I got my domain <a rel="noopener nofollow" class="external-link is-unresolved" href="https://winnerwind.in" target="_self">https://winnerwind.in</a> from <a data-tooltip-position="top" aria-label="https://spaceship.com" rel="noopener nofollow" class="external-link is-unresolved" href="https://spaceship.com" target="_self">Spaceship</a></p></div><div class="el-p"><p dir="auto">Go to that registrar and purchase the domain from them. Most registrars require that you purchase a minimum of one year. Now, you should have a domain and access to its admin panel.</p></div><div class="el-h1"><h1 data-heading="3. Cloudflare" dir="auto" class="heading" id="3._Cloudflare_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>3. Cloudflare</h1></div><div class="el-p"><p dir="auto">Cloudflare is a must-have for any hobbyist webserver owner. Along with their DDOS protection, they provide many quality of life features that massively improve the ease of hosting.</p></div><div class="el-h2"><h2 data-heading="3.1. Make an account." dir="auto" class="heading" id="3.1._Make_an_account._0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>3.1. Make an account.</h2></div><div class="el-p"><p dir="auto">Make an account. Self explanatory.</p></div><div class="el-h2"><h2 data-heading="3.2. Adding your domain to Cloudflare" dir="auto" class="heading" id="3.2._Adding_your_domain_to_Cloudflare_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>3.2. Adding your domain to Cloudflare</h2></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">You should now be able to access the account overview page. Click the "Add New Domain" button.</li>
<li data-line="1" dir="auto">Enter your entire domain and follow the main steps. </li>
<li data-line="2" dir="auto">Click the "Free Plan". </li>
<li data-line="3" dir="auto">It should now report "Invalid Nameservers" next to the domain's name. If that's the case, proceed to the next step.</li>
</ol></div><div class="el-h2"><h2 data-heading="3.3. Pointing your domain to Cloudflare" dir="auto" class="heading" id="3.3._Pointing_your_domain_to_Cloudflare_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>3.3. Pointing your domain to Cloudflare</h2></div><div class="el-p"><p dir="auto">After you get the name servers associated with your domain, you need to return to the registrar. </p></div><div class="el-p"><p dir="auto">This step differs from every registrar, so a few Google searches should get you on the right track.</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">Go to Nameservers.</li>
<li data-line="1" dir="auto">Remove all existing Nameservers</li>
<li data-line="2" dir="auto">Provide the Nameservers provided by Cloudflare. Make sure there are only two Nameservers in total.</li>
<li data-line="3" dir="auto">Wait for a day. Changing Nameservers takes a lot of time.</li>
</ol></div><div class="el-h1"><h1 data-heading="4. Setting up NGINX" dir="auto" class="heading" id="4._Setting_up_NGINX_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>4. Setting up NGINX</h1></div><div class="el-p"><p dir="auto">Now for the meat and potatoes of your web server. Be sure to read up on the <a data-tooltip-position="top" aria-label="https://nginx.org/en/docs/beginners_guide.html" rel="noopener nofollow" class="external-link is-unresolved" href="https://nginx.org/en/docs/beginners_guide.html" target="_self">Beginner Guide</a> and configure your services accordingly.</p></div><div class="el-p"><p dir="auto">You should be using port 80 to make communications. Be sure to remember this fact as it will come in handy.</p></div><div class="el-h1"><h1 data-heading="5. Bypassing NAT" dir="auto" class="heading" id="5._Bypassing_NAT_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>5. Bypassing NAT</h1></div><div class="el-p"><p dir="auto">This is the main reason I wrote this blog post. If you live in India, there's a very good chance that your network is behind CGNAT, that is Carrier Grade Network Address Translation. In short, this means that getting your computer to communicate with the outside world is basically impossible, or very difficult <sup data-footnote-id="fnref-3-a13ebaf64ce03ebb" class="footnote-ref" id="fnref-3-a13ebaf64ce03ebb"><a data-footref="3" href="blogs/tutorials/nat-bypass.html#fn-3-a13ebaf64ce03ebb_0" class="footnote-link" target="_self" rel="noopener nofollow">[3]</a></sup>. However, you can get around this by using Cloudflare Tunnel.</p></div><div class="el-h2"><h2 data-heading="4.1. Getting a Cloudflare Zero Trust account." dir="auto" class="heading" id="4.1._Getting_a_Cloudflare_Zero_Trust_account._0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>4.1. Getting a Cloudflare Zero Trust account.</h2></div><div class="el-p"><p dir="auto">Cloudflare Zero Trust is a seperate service from Cloudflare. One offering of Cloudflare Zero Trust is Cloudflare Tunnel, which you can think of as like a VPN<sup data-footnote-id="fnref-4-a13ebaf64ce03ebb" class="footnote-ref" id="fnref-4-a13ebaf64ce03ebb"><a data-footref="a" href="blogs/tutorials/nat-bypass.html#fn-4-a13ebaf64ce03ebb_0" class="footnote-link" target="_self" rel="noopener nofollow">[4]</a></sup> to connect your server directly with Cloudflare servers.</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">Go to <a data-tooltip-position="top" aria-label="https://one.dash.cloudflare.com/" rel="noopener nofollow" class="external-link is-unresolved" href="https://one.dash.cloudflare.com/" target="_self">Cloudflare Zero Trust</a></li>
<li data-line="1" dir="auto">Login with your existing Cloudflare account. It should appear in the drop-down menu.</li>
<li data-line="2" dir="auto">Select the Free plan. This is a free plan, but it is billed monthly, for 0$. You need to provide your credit card details.</li>
<li data-line="3" dir="auto">You should be able to access the dashboard now.</li>
</ol></div><div class="el-h2"><h2 data-heading="4.2. Setting up the tunnel." dir="auto" class="heading" id="4.2._Setting_up_the_tunnel._0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>4.2. Setting up the tunnel.</h2></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">Install <code>cloudflared</code>. On Arch, the command is <code>pacman -S cloudflared</code></li>
<li data-line="1" dir="auto">Go to Networks &gt; Tunnels</li>
<li data-line="2" dir="auto">Click Create New Tunnel</li>
<li data-line="3" dir="auto">Select Cloudflared</li>
<li data-line="4" dir="auto">Give it a name.</li>
<li data-line="5" dir="auto">You should get a list of commands to enter. There should be a command for "I already have Cloudflared installed". Copy it.</li>
<li data-line="6" dir="auto">Paste it into your web server's tunnel. It should automatically configure.</li>
<li data-line="7" dir="auto">Type in <code>http</code> and <code>localhost:</code> followed by the port number of NGINX. If you are using port 80, you should type <code>localhost:80</code></li>
<li data-line="8" dir="auto">You should be able to use your website now. </li>
</ol></div><div class="el-h1"><h1 data-heading="Footnotes" dir="auto" class="heading" id="Footnotes_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Footnotes</h1></div><div></div><div></div><div></div><div></div><div>
</div><div class="el-section"><section class="footnotes"><hr><ol>
<li data-line="-6" data-footnote-id="fn-1-a13ebaf64ce03ebb" id="fn-1-a13ebaf64ce03ebb" dir="auto"><p>Arch Linux is updated quite often, and new versions of packages are often untested. This can lead to instability for your web server, however I'll be using Arch Linux as it is quite simple and offers a lot of control.<a href="blogs/tutorials/nat-bypass.html#fnref-1-a13ebaf64ce03ebb_0" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></p></li>
<li data-line="-4" data-footnote-id="fn-2-a13ebaf64ce03ebb" id="fn-2-a13ebaf64ce03ebb" dir="auto"><p>Raspberry Pis are ARM based. This means that you cannot install the official version of Arch Linux. If you want to use a Pi, you're better off using the official pi-OS<a href="blogs/tutorials/nat-bypass.html#fnref-2-a13ebaf64ce03ebb_0" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></p></li>
<li data-line="-2" data-footnote-id="fn-3-a13ebaf64ce03ebb" id="fn-3-a13ebaf64ce03ebb" dir="auto"><p>You could always ask your ISP to temporarily turn off NAT for your network, but depending on the ISP, this may be a slow process, or they might outright deny your request.<a href="blogs/tutorials/nat-bypass.html#fnref-3-a13ebaf64ce03ebb_0" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></p></li>
<li data-line="0" data-footnote-id="fn-4-a13ebaf64ce03ebb" id="fn-4-a13ebaf64ce03ebb" dir="auto"><p>This blog post is NOT sponsored by Nord VPN.<a href="blogs/tutorials/nat-bypass.html#fnref-4-a13ebaf64ce03ebb_0" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></p></li>
</ol></section></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#Bypassing_NAT_for_self-hosting._0" data-path="#Bypassing_NAT_for_self-hosting._0"><div class="tree-item-inner heading-link" heading-name="Bypassing NAT for self-hosting.">Bypassing NAT for self-hosting.</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#TOC_0" data-path="#TOC_0"><div class="tree-item-inner heading-link" heading-name="TOC">TOC</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="blogs/tutorials/nat-bypass.html#1._Setting_up_a_web_server_0" data-path="#1._Setting_up_a_web_server_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="1. Setting up a web server">1. Setting up a web server</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#1.1._Arranging_the_hardware._0" data-path="#1.1._Arranging_the_hardware._0"><div class="tree-item-inner heading-link" heading-name="1.1. Arranging the hardware.">1.1. Arranging the hardware.</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#1.2._Arranging_the_software._0" data-path="#1.2._Arranging_the_software._0"><div class="tree-item-inner heading-link" heading-name="1.2. Arranging the software.">1.2. Arranging the software.</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#2._Buying_a_Domain_0" data-path="#2._Buying_a_Domain_0"><div class="tree-item-inner heading-link" heading-name="2. Buying a Domain">2. Buying a Domain</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="blogs/tutorials/nat-bypass.html#3._Cloudflare_0" data-path="#3._Cloudflare_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="3. Cloudflare">3. Cloudflare</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#3.1._Make_an_account._0" data-path="#3.1._Make_an_account._0"><div class="tree-item-inner heading-link" heading-name="3.1. Make an account.">3.1. Make an account.</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#3.2._Adding_your_domain_to_Cloudflare_0" data-path="#3.2._Adding_your_domain_to_Cloudflare_0"><div class="tree-item-inner heading-link" heading-name="3.2. Adding your domain to Cloudflare">3.2. Adding your domain to Cloudflare</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#3.3._Pointing_your_domain_to_Cloudflare_0" data-path="#3.3._Pointing_your_domain_to_Cloudflare_0"><div class="tree-item-inner heading-link" heading-name="3.3. Pointing your domain to Cloudflare">3.3. Pointing your domain to Cloudflare</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#4._Setting_up_NGINX_0" data-path="#4._Setting_up_NGINX_0"><div class="tree-item-inner heading-link" heading-name="4. Setting up NGINX">4. Setting up NGINX</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="blogs/tutorials/nat-bypass.html#5._Bypassing_NAT_0" data-path="#5._Bypassing_NAT_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="5. Bypassing NAT">5. Bypassing NAT</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#4.1._Getting_a_Cloudflare_Zero_Trust_account._0" data-path="#4.1._Getting_a_Cloudflare_Zero_Trust_account._0"><div class="tree-item-inner heading-link" heading-name="4.1. Getting a Cloudflare Zero Trust account.">4.1. Getting a Cloudflare Zero Trust account.</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#4.2._Setting_up_the_tunnel._0" data-path="#4.2._Setting_up_the_tunnel._0"><div class="tree-item-inner heading-link" heading-name="4.2. Setting up the tunnel.">4.2. Setting up the tunnel.</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="blogs/tutorials/nat-bypass.html#Footnotes_0" data-path="#Footnotes_0"><div class="tree-item-inner heading-link" heading-name="Footnotes">Footnotes</div></a><div class="tree-item-children"></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></body></html>